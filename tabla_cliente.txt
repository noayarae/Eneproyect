CREATE TABLE clientes (
    id_cliente INT PRIMARY KEY AUTO_INCREMENT,
    nombre VARCHAR(50),
    apellidos VARCHAR(100),
    dni VARCHAR(20),
    telefono VARCHAR(20),
    fecha_nacimiento DATE,
    domicilio1 VARCHAR(255),
    referencia1 VARCHAR(255),
    domicilio2 VARCHAR(255),
    referencia2 VARCHAR(255),
    ocupacion VARCHAR(50),
    clasificacion_riesgo VARCHAR(20),
    agencia VARCHAR(255),
    tipo_credito VARCHAR(255),
    estado VARCHAR(255),
    fecha_desembolso DATE,
    fecha_vencimiento DATE,
    monto DECIMAL(10,2),
    saldo DECIMAL(10,2),
    nombre_garante VARCHAR(50),
    apellidos_garante VARCHAR(100),
    dni_garante VARCHAR(20),
    telefono_garante VARCHAR(20),
    fecha_nacimiento_garante DATE,
    domicilio1_garante VARCHAR(255),
    referencia1_garante VARCHAR(255),
    domicilio2_garante VARCHAR(255),
    referencia2_garante VARCHAR(255),
    ocupacion_garante VARCHAR(50),
    clasificacion_riesgo_garante VARCHAR(20),
    fecha_clave DATE,
    accion_fecha_clave VARCHAR(255),
    analista VARCHAR(255),
    gestor VARCHAR(255),
    supervisor VARCHAR(255),
    administrador VARCHAR(255)    
);

CREATE TABLE etapa_prejudicial (
    id INT AUTO_INCREMENT PRIMARY KEY,                                 
    id_cliente INT, -- Clave foránea
    etapa VARCHAR(255),      -- agregado 
    fecha_acto DATE,                                                    
    acto VARCHAR(255),                                                 
    n_de_notif_voucher VARCHAR(50),                                     
    descripcion TEXT,                                                   
    notif_compromiso_pago_evidencia VARCHAR(255),                       
    fecha_clave DATE,                                                   
    accion_fecha_clave VARCHAR(255),                                    
    actor VARCHAR(50),                                                  
    evidencia1_localizacion VARCHAR(255),                                
    evidencia2_foto_fecha VARCHAR(255),                                 
    dias_desde_fecha_clave INT,                                         
    objetivo_logrado VARCHAR(50),                                       
    dias_de_mora INT,                                                   
    dias_mora_PJ INT,                                                   
    interes DECIMAL(10, 2),                                             
    saldo_int DECIMAL(10, 2),                                           
    monto_amortizado DECIMAL(10, 2),                                    
    saldo_fecha DECIMAL(10, 2),                                         
    CONSTRAINT fk_cliente_prejudicial FOREIGN KEY (id_cliente) REFERENCES clientes(id_cliente) ON DELETE CASCADE
);
-- DROP TABLE etapa_prejudicial;

CREATE TABLE etapa_judicial (
    id INT AUTO_INCREMENT PRIMARY KEY,
    id_cliente INT,			 -- Clave foránea
    etapa VARCHAR(255),
    fecha_judicial DATE, 		-- c
    acto_judicial VARCHAR(255),		-- c
    juzgado VARCHAR(255),
    n_exp_juzgado VARCHAR(50),
    n_cedula VARCHAR(50), 	--  campo es necesario
    descripcion_judicial TEXT,		-- c
    doc_evidencia VARCHAR(255),		
    fecha_clave_judicial DATE,		-- c
    accion_en_fecha_clave TEXT,
    actor_judicial VARCHAR(255),   -- c
    CONSTRAINT fk_cliente_judicial FOREIGN KEY (id_cliente) REFERENCES clientes(id_cliente) ON DELETE CASCADE
);